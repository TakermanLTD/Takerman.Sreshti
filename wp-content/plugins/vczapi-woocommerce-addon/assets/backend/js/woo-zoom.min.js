"use strict";!function(t){var i={init:function(){this.cacheDOM(),this.initSelect2(),this.eventHandlers()},cacheDOM:function(){this.formWrapper=t("#vczapi_zoom_connection"),this.connectZoomInput=t(".vczapi-zoom-connect"),this.enableZoomCheckbox=t("#_vczapi_enable_zoom_link"),this.meetingData="",this.zoomMeetingRecording=this.formWrapper.find("#_vczapi_meeting_or_recording")},eventHandlers:function(){this.enableZoomCheckbox.on("change",this.toggleZoomConnection.bind(this)),this.connectZoomInput.on("change",this.updateMeetingInfo.bind(this)),this.zoomMeetingRecording.on("change",this.toggleMeetingRecordings.bind(this)),this.formWrapper.find("#vczapi-wc-get-recordings").on("click",this.findRecordings.bind(this)),t(document).on("click","#vczapi-select-all-recordings",function(e){t(document).find(".vczapi-wc-retrieved-recording-item").prop("checked",this.checked)})},findRecordings:function(e){e.preventDefault();t(e.target);var i=this.formWrapper.find("#_vczapi_wc_recording_host").val(),n=this.formWrapper.find("#zoom_recording_year").val(),e=this.formWrapper.find("#zoom_recording_month").val();return null==i||""==i?(alert("Please select host"),void this.formWrapper.find("#_vczapi_recording_meeting_or_webinar").focus()):null==n||""==n?(alert("Please select year"),void this.formWrapper.find("#zoom_recording_year").focus()):null==e||""==e?(alert("Please select month"),void this.formWrapper.find("#zoom_recording_month").focus()):void t.ajax({method:"POST",url:ajaxurl,data:{action:"vczapi_get_admin_recordings_for_meeting",host_id:i,year:n,month:e},beforeSend:function(){t("#vczapi-select-recordings").html("Loading ...")},success:function(e){null==e.success&&console.log("Something has gone wrong"),e.success?t("#vczapi-select-recordings").html(e.data):0==e.success&&t("#vczapi-select-recordings").html(e.data.message)}})},toggleMeetingRecordings:function(e){"meeting"===t(e.target).val()?(this.formWrapper.find(".zoom-wc-meetings").show(),this.formWrapper.find(".zoom-wc-recording").hide()):(this.formWrapper.find(".zoom-wc-recording").show(),this.formWrapper.find(".zoom-wc-meetings").hide())},initSelect2:function(){this.connectZoomInput.select2({minimumInputLength:3,ajax:{url:ajaxurl+"?action=vczapi_zoom_woocommerce_link&security="+vczapiWC.nonce,dataType:"json",data:function(e){return{search:e.term,product_id:i.formWrapper.find("#vczapi-product-id").val()}},processResults:function(e){return i.meetingData=e.data.meetingData,{results:e.data.items}}}})},toggleZoomConnection:function(e){t(e.currentTarget).is(":checked")?t(".zoom-connection-enabled").show():t(".zoom-connection-enabled").hide()},updateMeetingInfo:function(e){e=t(e.currentTarget).val(),e=this.meetingData[e];""!==e&&t(".vczapi-woocommerce--meeting-details").find(".info").html(e)}},e={init:function(){this.registrantTable=t("#vczapi-wc-meeting-registrants-dtable"),void 0!==this.registrantTable&&0<this.registrantTable.length&&this.registrantTable.dataTable({pageLength:10})}};t(function(){i.init(),e.init()})}(jQuery);